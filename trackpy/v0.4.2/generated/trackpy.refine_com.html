<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>trackpy.refine_com &#8212; trackpy 0.4.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.6/spacelab/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.4.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="trackpy 0.4.2 documentation" href="../index.html" />
    <link rel="up" title="API reference" href="../api.html" />
    <link rel="next" title="trackpy.refine_leastsq" href="trackpy.refine_leastsq.html" />
    <link rel="prev" title="trackpy.find_link" href="trackpy.find_link.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          trackpy</a>
        <span class="navbar-text navbar-version pull-left"><b>0.4.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../tutorial.html">Tutorial</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction to Trackpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installing Trackpy</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">What&#8217;s new in the package</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/walkthrough.html">Walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/prediction.html">Prediction (Linking)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/tracking-3d.html">Tracking in 3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/uncertainty.html">Uncertainty Estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/subnets.html">Advanced Linking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/adaptive-search.html">Adaptive Linking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/on-disk.html">Streaming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/performance.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/parallel-locate.html">Parallelized Feature Finding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/custom-feature-detection.html">Tracking Large Features Such As Bubbles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/brightfield.html">Tracking Particles&#8217; Rings in Bright-Field Microscopy</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">trackpy.refine_com</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="trackpy-refine-com">
<h1>trackpy.refine_com<a class="headerlink" href="#trackpy-refine-com" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="trackpy.refine_com">
<code class="descclassname">trackpy.</code><code class="descname">refine_com</code><span class="sig-paren">(</span><em>raw_image</em>, <em>image</em>, <em>radius</em>, <em>coords</em>, <em>max_iterations=10</em>, <em>engine='auto'</em>, <em>shift_thresh=0.6</em>, <em>characterize=True</em>, <em>pos_columns=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trackpy.refine_com" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the center of mass of a bright feature starting from an estimate.</p>
<p>Characterize the neighborhood of a local maximum, and iteratively
hone in on its center-of-brightness.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>raw_image</strong> : array (any dimensions)</p>
<blockquote>
<div><p>Image used for final characterization. Ideally, pixel values of
this image are not rescaled, but it can also be identical to
<code class="docutils literal"><span class="pre">image</span></code>.</p>
</div></blockquote>
<p><strong>image</strong> : array (same size as raw_image)</p>
<blockquote>
<div><p>Processed image used for centroid-finding and most particle
measurements.</p>
</div></blockquote>
<p><strong>coords</strong> : array or DataFrame</p>
<blockquote>
<div><p>estimated position</p>
</div></blockquote>
<p><strong>max_iterations</strong> : integer</p>
<blockquote>
<div><p>max number of loops to refine the center of mass, default 10</p>
</div></blockquote>
<p><strong>engine</strong> : {&#8216;python&#8217;, &#8216;numba&#8217;}</p>
<blockquote>
<div><p>Numba is faster if available, but it cannot do walkthrough.</p>
</div></blockquote>
<p><strong>shift_thresh</strong> : float, optional</p>
<blockquote>
<div><p>Default 0.6 (unit is pixels).
If the brightness centroid is more than this far off the mask center,
shift mask to neighboring pixel. The new mask will be used for any
remaining iterations.</p>
</div></blockquote>
<p><strong>characterize</strong> : boolean, True by default</p>
<blockquote>
<div><p>Compute and return mass, size, eccentricity, signal.</p>
</div></blockquote>
<p><strong>pos_columns: list of strings, optional</strong></p>
<blockquote>
<div><p>Column names that contain the position coordinates.
Defaults to <code class="docutils literal"><span class="pre">['y',</span> <span class="pre">'x']</span></code> or <code class="docutils literal"><span class="pre">['z',</span> <span class="pre">'y',</span> <span class="pre">'x']</span></code>, if <code class="docutils literal"><span class="pre">'z'</span></code> exists.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">DataFrame([x, y, mass, size, ecc, signal, raw_mass])</p>
<blockquote class="last">
<div><p>where &#8220;x, y&#8221; are appropriate to the dimensionality of the image,
mass means total integrated brightness of the blob,
size means the radius of gyration of its Gaussian-like profile,
ecc is its eccentricity (0 is circular),
and raw_mass is the total integrated brightness in raw_image.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/generated/trackpy.refine_com.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2010-2019, Trackpy Contributors.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.<br/>
    </p>
  </div>
</footer>
  </body>
</html>